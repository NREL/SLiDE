path_in:  datasources/SGF
file_out: ""
description: ""

file_in:
    - name:     97states.xlsx
      nickname: 1997
      sheet:    97stspr
      range:    A4:B167
      # range:    A4:B2759
    - name:     98states.xlsx
      nickname: 1998
      sheet:    98STABS
      range:    A4:AZ56
    - name:     99statess.xlsx
      nickname: 1999
      sheet:    1
      range:    A3:BX64
    - name:     99statess.xlsx
      nickname: 1999
      sheet:    2
      range:    A3:CA64
    - name:     00statess.xlsx
      nickname: 2000
      sheet:    TabStateGovFinSS (US-WY)
      range:    A3:EX64
    - name:     01statess.xlsx
      nickname: 2001
      sheet:    01stus-wy
      range:    A3:EX66
    - name:     02statess.xlsx
      nickname: 2002
      sheet:    0200usst
      range:    A3:CY66
    - name:     03statess.xlsx
      nickname: 2003
      sheet:    0300usst
      range:    A3:CY65
    - name:     04statess.xlsx
      nickname: 2004
      sheet:    2004 State Finance (US-WY)
      range:    A3:AZ64
    - name:     05statess.xlsx
      nickname: 2005
      sheet:    Sheet1
      range:    A3:AZ64
    - name:     06statess.xlsx
      nickname: 2006
      sheet:    2006 State US-WY
      range:    A3:AZ64
    - name:     07statess.xlsx
      nickname: 2007
      sheet:    2007 US-WY
      range:    A3:AZ64
    - name:     08statess.xlsx
      nickname: 2008
      sheet:    2008 US-WY
      range:    A3:AZ64
    - name:     09statess.xlsx
      nickname: 2009
      sheet:    2009 US-WY
      range:    A3:AZ64
    - name:     10statess.xlsx
      nickname: 2010
      sheet:    2010 US-WY
      range:    A3:AZ64
    - name:     11statess.xlsx
      nickname: 2011
      sheet:    2011 US-WY
      range:    A3:AZ64

col_out:
    - label:             string
    - geographic_region: string
    - year:              int
    - value:             float
    - units:             string

# MAP -- Define an 'output' column containing values based on those in an
# 'input' column. The mapping columns 'from' -> 'to' are contained in a
# .csv 'file' in the core_maps directory. The columns 'input' and 'from'
# should contain the same values, as should 'output' and 'to'.
mapping:
    file:     sgf
    from:     sgf
    to:       label
    input:    label
    output:   label

grouping:
    file:     regions
    from:     from
    to:       to
    input:    label
    output:   geographic_region

renaming:
    - from:    Item
      to:      label
      col:     1
    #   ind_key: nickname
    #   ind_val: [1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011]
    - from:    missing
      to:      label
      col:     1
    - from:    Amount
      to:      value
      col:     2
    #   ind_key: nickname
    #   ind_val: 1998

# renaming:
#     1997:
#         - from: missing
#           to:   label
#         - from: Amount
#           to:   value
#     1998:
#         - from: missing
#           to:   label
#     1999:
#         - from: Item
#           to:   label

melting:
    on:   label
    var:  geographic_region
    val:  value
    type: string

setting:
    col:      units
    val:      thousands of us dollars (USD)

replacing:
    col:      value
    from:     "-"
    to:       0

joining:
    - file:     regions
      from:     from
      to:       to
      input:    geographic_region
      output:   geographic_region
    - file:     sgf
      from:     sgf
      to:       label
      input:    label
      output:   label