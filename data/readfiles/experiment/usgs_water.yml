# Autogenerated from generate_yaml.xlsx
Editable: true

PathIn:  [data, datasources, USGS]
PathOut: [data, experiment, usgs_water.csv]

XLSXInput:
  name:  usco2015v2.0.xlsx
  range: A2:EK3225
  sheet: usco2015v2.0
  descriptor: 2015

Order:
  - {col: yr,          type: Int}
  - {col: state,       type: String}
  - {col: county,      type: String}
# - {col: county_desc, type: String}
  - {col: code,        type: String}
  - {col: sector,      type: String}
  - {col: source,      type: String}
  - {col: units,       type: String}
  - {col: value,       type: Float64}

Rename:
  - {from: YEAR,   to: yr}
  - {from: STATE,  to: state}
# - {from: COUNTY, to: county_desc}
  - {from: FIPS,   to: county}

Melt:
  on:  [yr, state, county]
  var: code
  val: value

Map:
  - file:   [parse, regions.csv]
    from:   from
    to:     to
    input:  state
    output: state
    kind:   left
  - file:   [parse, usgs.csv]
    from:   code
    to:     [sector_desc, source_desc, salinity, units]
    input:  code
    output: [sector, source, salinity, units]
    kind:   left

Replace:
  - col: value
    from: [--, N/A]
    to:   0.0

Drop:
  - col: [STATEFIPS, COUNTY, COUNTYFIPS]
    val: all
    operation: "=="
