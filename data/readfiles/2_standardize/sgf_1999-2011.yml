Path: ["..", "data", "datasources", "SGF"]

XLSXInput:
  - name: 99statess.xlsx
    sheet: [1, 2]
    range: ["A3:BX64", "A3:CA64"]
    descriptor: 1999
  - name:  00statess.xlsx
    sheet: TabStateGovFinSS (US-WY)
    range: A3:EX64
    descriptor: 2000
  - name:  01statess.xlsx
    sheet: 01stus-wy
    range: A3:EX64
    descriptor: 2001
  - name:  02statess.xlsx
    sheet: 0200usst
    range: A3:CY64
    descriptor: 2002
  - name:  03statess.xlsx
    sheet: 0300usst
    range: A3:CY65
    descriptor: 2003
  - name:  04statess.xlsx
    sheet: 2004 State Finance (US-WY)
    range: A3:AZ64
    descriptor: 2004
  - name:  05statess.xlsx
    sheet: Sheet1
    range: A3:AZ64
    descriptor: 2005
  - name:  06statess.xlsx
    sheet: 2006 State US-WY
    range: A3:AZ64
    descriptor: 2006
  - name:  07statess.xlsx
    sheet: 2007 US-WY
    range: A3:AZ64
    descriptor: 2007
  - name:  08statess.xlsx
    sheet: 2008 US-WY
    range: A3:AZ64
    descriptor: 2008
  - name:  09statess.xlsx
    sheet: 2009 US-WY
    range: A3:AZ64
    descriptor: 2009
  - name:  10statess.xlsx
    sheet: 2010 US-WY
    range: A3:AZ64
    descriptor: 2010
  - name:  11statess.xlsx
    sheet: 2011 US-WY
    range: A3:AZ64
    descriptor: 2011

Describe:
  col: year

Order:
  - {col: year,  type: Int}
  - {col: state, type: String}
  - {col: label, type: String}
  - {col: units, type: String}
  - {col: value, type: Float64}

Rename:
  from: Item
  to:   label

Melt:
  on:  label
  var: state
  val: value
  type: Int
  
Map:
  - file:   sgf.csv
    from:   sgf
    to:     [units, desc, code]
    input:  label
    output: [units, desc, label]
  - file:   regions.csv
    from:   from
    to:     to
    input:  state
    output: state

Replace:
  col:  value
  from: ["-", "(X)"]
  to:   0

Drop:
  - col: [label, state]
    val: missing
    operation: "=="
  # - col: state
  #   val: us
  #   operation: "=="